# Memory Benchmark

The `MemoryBenchmark.ino` was compiled with each `FEATURE_*` and the flash
memory and static RAM sizes were recorded. The `FEATURE_BASELINE` selection is
the baseline, and its memory usage numbers are subtracted from the subsequent
`FEATURE_*` memory usage.

**Version**: AceSorting v0.1.0

**DO NOT EDIT**: This file was auto-generated using `make README.md`.

## How to Regenerate

To regenerate this README.md:

```
$ make clean_benchmarks
$ make benchmarks
$ make README.md
```

The `make benchmarks` target uses `collect.sh` script which calls `auniter.sh`
(https://github.com/bxparks/AUniter) to invoke the Arduino IDE programmatically.
It produces a `*.txt` file with the flash and ram usage information (e.g.
`nano.txt`).

The `make README.md` command calls the `generated_readme.py` Python script which
generates this `README.md` file. The ASCII tables below are generated by the
`generate_table.awk` script, which takes each `*.txt` file and converts it to an
ASCII table.

## Library Size Changes

**v0.1.0**
    * Initial version.
    * The memory usage for C-library `qsort()` is suspiciously low on the ESP32,
      only 88 bytes, compared to 800-1400 bytes for other platforms. I think
      this indicates that the `qsort()` function is already compiled into the
      ESP32 runtime library.

## Arduino Nano

* 16MHz ATmega328P
* Arduino IDE 1.8.13
* Arduino AVR Boards 1.8.3

```
+---------------------------------------------------------------------+
| Functionality                          |  flash/  ram |       delta |
|----------------------------------------+--------------+-------------|
| Baseline                               |   1048/   34 |     0/    0 |
|----------------------------------------+--------------+-------------|
| qsort()                                |   2132/   34 |  1084/    0 |
|----------------------------------------+--------------+-------------|
| bubbleSort()                           |   1094/   34 |    46/    0 |
| insertionSort()                        |   1110/   34 |    62/    0 |
|----------------------------------------+--------------+-------------|
| shellSortClassic()                     |   1148/   34 |   100/    0 |
| shellSortKnuth()                       |   1148/   34 |   100/    0 |
| shellSortTokuda()                      |   1228/   60 |   180/   26 |
|----------------------------------------+--------------+-------------|
| combSort13()                           |   1202/   34 |   154/    0 |
| combSort125()                          |   1198/   34 |   150/    0 |
|----------------------------------------+--------------+-------------|
| quickSortMiddle()                      |   1226/   34 |   178/    0 |
| quickSortMedian()                      |   1278/   34 |   230/    0 |
| quickSortMedianSwapped()               |   1326/   34 |   278/    0 |
+---------------------------------------------------------------------+

```

## Sparkfun Pro Micro

* 16 MHz ATmega32U4
* Arduino IDE 1.8.13
* SparkFun AVR Boards 1.1.13

```
+---------------------------------------------------------------------+
| Functionality                          |  flash/  ram |       delta |
|----------------------------------------+--------------+-------------|
| Baseline                               |   4042/  174 |     0/    0 |
|----------------------------------------+--------------+-------------|
| qsort()                                |   5126/  174 |  1084/    0 |
|----------------------------------------+--------------+-------------|
| bubbleSort()                           |   4088/  174 |    46/    0 |
| insertionSort()                        |   4104/  174 |    62/    0 |
|----------------------------------------+--------------+-------------|
| shellSortClassic()                     |   4142/  174 |   100/    0 |
| shellSortKnuth()                       |   4142/  174 |   100/    0 |
| shellSortTokuda()                      |   4222/  200 |   180/   26 |
|----------------------------------------+--------------+-------------|
| combSort13()                           |   4196/  174 |   154/    0 |
| combSort125()                          |   4192/  174 |   150/    0 |
|----------------------------------------+--------------+-------------|
| quickSortMiddle()                      |   4220/  174 |   178/    0 |
| quickSortMedian()                      |   4272/  174 |   230/    0 |
| quickSortMedianSwapped()               |   4320/  174 |   278/    0 |
+---------------------------------------------------------------------+

```

## SAMD21 M0 Mini

* 48 MHz ARM Cortex-M0+
* Arduino IDE 1.8.13
* Sparkfun SAMD Boards 1.8.3

```
+---------------------------------------------------------------------+
| Functionality                          |  flash/  ram |       delta |
|----------------------------------------+--------------+-------------|
| Baseline                               |  10628/    0 |     0/    0 |
|----------------------------------------+--------------+-------------|
| qsort()                                |  11416/    0 |   788/    0 |
|----------------------------------------+--------------+-------------|
| bubbleSort()                           |  10660/    0 |    32/    0 |
| insertionSort()                        |  10676/    0 |    48/    0 |
|----------------------------------------+--------------+-------------|
| shellSortClassic()                     |  10692/    0 |    64/    0 |
| shellSortKnuth()                       |  10700/    0 |    72/    0 |
| shellSortTokuda()                      |  10800/    0 |   172/    0 |
|----------------------------------------+--------------+-------------|
| combSort13()                           |  10688/    0 |    60/    0 |
| combSort125()                          |  10688/    0 |    60/    0 |
|----------------------------------------+--------------+-------------|
| quickSortMiddle()                      |  10728/    0 |   100/    0 |
| quickSortMedian()                      |  10760/    0 |   132/    0 |
| quickSortMedianSwapped()               |  10772/    0 |   144/    0 |
+---------------------------------------------------------------------+

```

(SAMD compiler does not produce RAM usage numbers.)

## STM32 Blue Pill

* STM32F103C8, 72 MHz ARM Cortex-M3
* Arduino IDE 1.8.13
* STM32duino 2.0.0

```
+---------------------------------------------------------------------+
| Functionality                          |  flash/  ram |       delta |
|----------------------------------------+--------------+-------------|
| Baseline                               |  26804/ 3664 |     0/    0 |
|----------------------------------------+--------------+-------------|
| qsort()                                |  27640/ 3664 |   836/    0 |
|----------------------------------------+--------------+-------------|
| bubbleSort()                           |  26840/ 3664 |    36/    0 |
| insertionSort()                        |  26848/ 3664 |    44/    0 |
|----------------------------------------+--------------+-------------|
| shellSortClassic()                     |  26880/ 3664 |    76/    0 |
| shellSortKnuth()                       |  26872/ 3664 |    68/    0 |
| shellSortTokuda()                      |  26944/ 3664 |   140/    0 |
|----------------------------------------+--------------+-------------|
| combSort13()                           |  26880/ 3664 |    76/    0 |
| combSort125()                          |  26876/ 3664 |    72/    0 |
|----------------------------------------+--------------+-------------|
| quickSortMiddle()                      |  26904/ 3664 |   100/    0 |
| quickSortMedian()                      |  26936/ 3664 |   132/    0 |
| quickSortMedianSwapped()               |  26960/ 3664 |   156/    0 |
+---------------------------------------------------------------------+

```

An entry of `-1` indicates that the memory usage exceeded the maximum of the
microcontroller and the compiler did not generate the desired information.

## ESP8266

* NodeMCU 1.0, 80MHz ESP8266
* Arduino IDE 1.8.13
* ESP8266 Boards 2.7.4

```
+---------------------------------------------------------------------+
| Functionality                          |  flash/  ram |       delta |
|----------------------------------------+--------------+-------------|
| Baseline                               | 257072/26796 |     0/    0 |
|----------------------------------------+--------------+-------------|
| qsort()                                | 258048/26796 |   976/    0 |
|----------------------------------------+--------------+-------------|
| bubbleSort()                           | 257136/26796 |    64/    0 |
| insertionSort()                        | 257136/26796 |    64/    0 |
|----------------------------------------+--------------+-------------|
| shellSortClassic()                     | 257168/26796 |    96/    0 |
| shellSortKnuth()                       | 257184/26796 |   112/    0 |
| shellSortTokuda()                      | 257228/26824 |   156/   28 |
|----------------------------------------+--------------+-------------|
| combSort13()                           | 257152/26796 |    80/    0 |
| combSort125()                          | 257152/26796 |    80/    0 |
|----------------------------------------+--------------+-------------|
| quickSortMiddle()                      | 257216/26796 |   144/    0 |
| quickSortMedian()                      | 257248/26796 |   176/    0 |
| quickSortMedianSwapped()               | 257264/26796 |   192/    0 |
+---------------------------------------------------------------------+

```

## ESP32

* ESP32-01 Dev Board, 240 MHz Tensilica LX6
* Arduino IDE 1.8.13
* ESP32 Boards 1.0.6

```
+---------------------------------------------------------------------+
| Functionality                          |  flash/  ram |       delta |
|----------------------------------------+--------------+-------------|
| Baseline                               | 197952/13100 |     0/    0 |
|----------------------------------------+--------------+-------------|
| qsort()                                | 198040/13100 |    88/    0 |
|----------------------------------------+--------------+-------------|
| bubbleSort()                           | 197992/13100 |    40/    0 |
| insertionSort()                        | 198024/13100 |    72/    0 |
|----------------------------------------+--------------+-------------|
| shellSortClassic()                     | 198032/13100 |    80/    0 |
| shellSortKnuth()                       | 198040/13100 |    88/    0 |
| shellSortTokuda()                      | 198104/13100 |   152/    0 |
|----------------------------------------+--------------+-------------|
| combSort13()                           | 198048/13100 |    96/    0 |
| combSort125()                          | 198036/13100 |    84/    0 |
|----------------------------------------+--------------+-------------|
| quickSortMiddle()                      | 198068/13100 |   116/    0 |
| quickSortMedian()                      | 198096/13100 |   144/    0 |
| quickSortMedianSwapped()               | 198128/13100 |   176/    0 |
+---------------------------------------------------------------------+

```

RAM usage remains constant as more objects are created, which indicates that an
initial pool of a certain minimum size is created regardless of the actual RAM
usage by objects.

## Teensy 3.2

* 96 MHz ARM Cortex-M4
* Arduino IDE 1.8.13
* Teensyduino 1.53

```
+---------------------------------------------------------------------+
| Functionality                          |  flash/  ram |       delta |
|----------------------------------------+--------------+-------------|
| Baseline                               |   7776/ 3072 |     0/    0 |
|----------------------------------------+--------------+-------------|
| qsort()                                |   9236/ 3072 |  1460/    0 |
|----------------------------------------+--------------+-------------|
| bubbleSort()                           |   7812/ 3072 |    36/    0 |
| insertionSort()                        |   7836/ 3072 |    60/    0 |
|----------------------------------------+--------------+-------------|
| shellSortClassic()                     |   7868/ 3072 |    92/    0 |
| shellSortKnuth()                       |   7868/ 3072 |    92/    0 |
| shellSortTokuda()                      |   7960/ 3072 |   184/    0 |
|----------------------------------------+--------------+-------------|
| combSort13()                           |   7852/ 3072 |    76/    0 |
| combSort125()                          |   7844/ 3072 |    68/    0 |
|----------------------------------------+--------------+-------------|
| quickSortMiddle()                      |   7884/ 3072 |   108/    0 |
| quickSortMedian()                      |   7920/ 3072 |   144/    0 |
| quickSortMedianSwapped()               |   7948/ 3072 |   172/    0 |
+---------------------------------------------------------------------+

```

