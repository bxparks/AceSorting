# AutoBenchmark

Determine the speed of various AceCommon functions and algorithms.

**Version**: AceSorting v0.1

**DO NOT EDIT**: This file was auto-generated using `make README.md`.

## Dependencies

This program depends on the following libraries:

* [AceCommon](https://github.com/bxparks/AceCommon)

## How to Generate

This requires the [AUniter](https://github.com/bxparks/AUniter) script
to execute the Arduino IDE programmatically.

The `Makefile` has rules to generate the `*.txt` results file for several
microcontrollers that I usually support, but the `$ make benchmarks` command
does not work very well because the USB port of the microcontroller is a
dynamically changing parameter. I created a semi-automated way of collect the
`*.txt` files:

1. Connect the microcontroller to the serial port. I usually do this through a
USB hub with individually controlled switch.
2. Type `$ auniter ports` to determine its `/dev/ttyXXX` port number (e.g.
`/dev/ttyUSB0` or `/dev/ttyACM0`).
3. If the port is `USB0` or `ACM0`, type `$ make nano.txt`, etc.
4. Switch off the old microontroller.
5. Go to Step 1 and repeat for each microcontroller.

The `generate_table.awk` program reads one of `*.txt` files and prints out an
ASCII table that can be directly embedded into this README.md file. For example
the following command produces the table in the Nano section below:

```
$ ./generate_table.awk < nano.txt
```

Fortunately, we no longer need to run `generate_table.awk` for each `*.txt`
file. The process has been automated using the `generate_readme.py` script which
will be invoked by the following command:
```
$ make README.md
```

## CPU Time Changes

**v0.1**

* Initial results.
* The C-library `qsort()` is far slower than the C++ version because it uses
  a callback to a comparison function through a function pointer.

## Results

The following results show the runtime of each sorting function in microseconds,
when sorting different sized arrays.

### Arduino Nano

* 16MHz ATmega328P
* Arduino IDE 1.8.13
* Arduino AVR Boards 1.8.3
* `micros()` has a resolution of 4 microseconds

```
+---------------------+------------------------+---------+---------+---------+
|            \      N |    10 |    30 |    100 |     300 |    1000 |    3000 |
| Function    \       |       |       |        |         |         |         |
|---------------------+-------+-------+--------+---------+---------+---------|
| qsort()             | 0.198 | 0.838 |  3.661 |  13.074 |         |         |
|---------------------+-------+-------+--------+---------+---------+---------|
| bubbleSort()        | 0.116 | 0.979 | 12.973 | 124.880 |         |         |
| insertionSort()     | 0.041 | 0.260 |  2.480 |  21.708 |         |         |
|---------------------+-------+-------+--------+---------+---------+---------|
| shellSortClassic()  | 0.090 | 0.377 |  1.799 |   7.478 |         |         |
| shellSortKnuth()    | 0.102 | 0.331 |  1.446 |   5.701 |         |         |
| shellSortTokuda()   | 0.074 | 0.333 |  1.630 |   6.484 |         |         |
|---------------------+-------+-------+--------+---------+---------+---------|
| combSort13()        | 0.166 | 0.527 |  2.152 |   8.255 |         |         |
| combSort125()       | 0.179 | 0.580 |  2.332 |   8.878 |         |         |
|---------------------+-------+-------+--------+---------+---------+---------|
| quickSortMiddle()   | 0.100 | 0.372 |  1.579 |   5.635 |         |         |
| quickSortMedian()   | 0.114 | 0.428 |  1.732 |   5.959 |         |         |
| quickSortMdnSwppd() | 0.093 | 0.336 |  1.406 |   4.865 |         |         |
+---------------------+-------+-------+--------+---------+---------+---------+

```

### SparkFun Pro Micro

* 16 MHz ATmega32U4
* Arduino IDE 1.8.13
* SparkFun AVR Boards 1.1.13
* `micros()` has a resolution of 4 microseconds

```
+---------------------+------------------------+---------+---------+---------+
|            \      N |    10 |    30 |    100 |     300 |    1000 |    3000 |
| Function    \       |       |       |        |         |         |         |
|---------------------+-------+-------+--------+---------+---------+---------|
| qsort()             | 0.204 | 0.843 |  3.616 |  13.133 |         |         |
|---------------------+-------+-------+--------+---------+---------+---------|
| bubbleSort()        | 0.104 | 1.136 | 13.031 | 122.577 |         |         |
| insertionSort()     | 0.039 | 0.244 |  2.669 |  22.279 |         |         |
|---------------------+-------+-------+--------+---------+---------+---------|
| shellSortClassic()  | 0.091 | 0.367 |  1.795 |   7.473 |         |         |
| shellSortKnuth()    | 0.104 | 0.332 |  1.475 |   5.745 |         |         |
| shellSortTokuda()   | 0.073 | 0.336 |  1.649 |   6.608 |         |         |
|---------------------+-------+-------+--------+---------+---------+---------|
| combSort13()        | 0.165 | 0.540 |  2.221 |   8.160 |         |         |
| combSort125()       | 0.174 | 0.584 |  2.356 |   8.960 |         |         |
|---------------------+-------+-------+--------+---------+---------+---------|
| quickSortMiddle()   | 0.098 | 0.369 |  1.566 |   5.596 |         |         |
| quickSortMedian()   | 0.118 | 0.432 |  1.704 |   5.932 |         |         |
| quickSortMdnSwppd() | 0.094 | 0.345 |  1.418 |   4.878 |         |         |
+---------------------+-------+-------+--------+---------+---------+---------+

```

### SAMD21 M0 Mini

* 48 MHz ARM Cortex-M0+
* Arduino IDE 1.8.13
* SparkFun SAMD Core 1.8.3

```
+---------------------+------------------------+---------+---------+---------+
|            \      N |    10 |    30 |    100 |     300 |    1000 |    3000 |
| Function    \       |       |       |        |         |         |         |
|---------------------+-------+-------+--------+---------+---------+---------|
| qsort()             | 0.050 | 0.204 |  0.881 |   3.176 |  12.440 |  42.142 |
|---------------------+-------+-------+--------+---------+---------+---------|
| bubbleSort()        | 0.035 | 0.292 |  3.581 |  33.573 | 379.763 |         |
| insertionSort()     | 0.017 | 0.098 |  0.891 |   8.022 |  90.055 |         |
|---------------------+-------+-------+--------+---------+---------+---------|
| shellSortClassic()  | 0.021 | 0.086 |  0.416 |   1.697 |   7.530 |  27.986 |
| shellSortKnuth()    | 0.019 | 0.068 |  0.294 |   1.156 |   5.085 |  19.233 |
| shellSortTokuda()   | 0.019 | 0.083 |  0.390 |   1.557 |   6.690 |  24.228 |
|---------------------+-------+-------+--------+---------+---------+---------|
| combSort13()        | 0.035 | 0.121 |  0.499 |   1.838 |   8.045 |  29.460 |
| combSort125()       | 0.038 | 0.129 |  0.529 |   2.041 |   8.473 |  30.738 |
|---------------------+-------+-------+--------+---------+---------+---------|
| quickSortMiddle()   | 0.023 | 0.078 |  0.310 |   1.085 |   4.188 |  14.455 |
| quickSortMedian()   | 0.026 | 0.089 |  0.345 |   1.175 |   4.345 |  14.528 |
| quickSortMdnSwppd() | 0.021 | 0.071 |  0.286 |   0.971 |   3.767 |  12.610 |
+---------------------+-------+-------+--------+---------+---------+---------+

```

### STM32

* STM32 "Blue Pill", STM32F103C8, 72 MHz ARM Cortex-M3
* Arduino IDE 1.8.13
* STM32duino 2.0.0

```
+---------------------+------------------------+---------+---------+---------+
|            \      N |    10 |    30 |    100 |     300 |    1000 |    3000 |
| Function    \       |       |       |        |         |         |         |
|---------------------+-------+-------+--------+---------+---------+---------|
| qsort()             | 0.031 | 0.139 |  0.606 |   2.242 |   8.906 |  30.722 |
|---------------------+-------+-------+--------+---------+---------+---------|
| bubbleSort()        | 0.025 | 0.231 |  2.517 |  25.271 | 291.493 |         |
| insertionSort()     | 0.008 | 0.044 |  0.446 |   3.817 |  43.280 |         |
|---------------------+-------+-------+--------+---------+---------+---------|
| shellSortClassic()  | 0.018 | 0.076 |  0.362 |   1.489 |   6.849 |  24.927 |
| shellSortKnuth()    | 0.014 | 0.061 |  0.305 |   1.248 |   5.509 |  21.403 |
| shellSortTokuda()   | 0.011 | 0.045 |  0.212 |   0.850 |   3.666 |  13.275 |
|---------------------+-------+-------+--------+---------+---------+---------|
| combSort13()        | 0.019 | 0.087 |  0.442 |   1.760 |   7.861 |  29.282 |
| combSort125()       | 0.019 | 0.091 |  0.453 |   1.842 |   7.836 |  28.986 |
|---------------------+-------+-------+--------+---------+---------+---------|
| quickSortMiddle()   | 0.019 | 0.070 |  0.311 |   1.111 |   4.401 |  15.074 |
| quickSortMedian()   | 0.020 | 0.071 |  0.280 |   0.962 |   3.749 |  12.559 |
| quickSortMdnSwppd() | 0.015 | 0.055 |  0.229 |   0.830 |   3.293 |  11.387 |
+---------------------+-------+-------+--------+---------+---------+---------+

```

### ESP8266

* NodeMCU 1.0 clone, 80MHz ESP8266
* Arduino IDE 1.8.13
* ESP8266 Boards 2.7.4

```
+---------------------+------------------------+---------+---------+---------+
|            \      N |    10 |    30 |    100 |     300 |    1000 |    3000 |
| Function    \       |       |       |        |         |         |         |
|---------------------+-------+-------+--------+---------+---------+---------|
| qsort()             | 0.028 | 0.095 |  0.413 |   1.522 |   6.027 |  20.773 |
|---------------------+-------+-------+--------+---------+---------+---------|
| bubbleSort()        | 0.022 | 0.157 |  2.155 |  20.738 | 228.261 |         |
| insertionSort()     | 0.008 | 0.037 |  0.356 |   3.084 |  34.894 |         |
|---------------------+-------+-------+--------+---------+---------+---------|
| shellSortClassic()  | 0.013 | 0.050 |  0.248 |   1.017 |   4.413 |  16.342 |
| shellSortKnuth()    | 0.010 | 0.037 |  0.173 |   0.681 |   3.009 |  11.192 |
| shellSortTokuda()   | 0.009 | 0.038 |  0.183 |   0.736 |   3.137 |  11.381 |
|---------------------+-------+-------+--------+---------+---------+---------|
| combSort13()        | 0.013 | 0.049 |  0.220 |   0.834 |   3.736 |  13.468 |
| combSort125()       | 0.014 | 0.053 |  0.236 |   0.922 |   3.906 |  14.292 |
|---------------------+-------+-------+--------+---------+---------+---------|
| quickSortMiddle()   | 0.013 | 0.046 |  0.184 |   0.650 |   2.499 |   8.620 |
| quickSortMedian()   | 0.016 | 0.052 |  0.199 |   0.679 |   2.562 |   8.442 |
| quickSortMdnSwppd() | 0.012 | 0.039 |  0.159 |   0.558 |   2.114 |   7.121 |
+---------------------+-------+-------+--------+---------+---------+---------+

```

### ESP32

* ESP32-01 Dev Board, 240 MHz Tensilica LX6
* Arduino IDE 1.8.13
* ESP32 Boards 1.0.6

```
+---------------------+------------------------+---------+---------+---------+
|            \      N |    10 |    30 |    100 |     300 |    1000 |    3000 |
| Function    \       |       |       |        |         |         |         |
|---------------------+-------+-------+--------+---------+---------+---------|
| qsort()             | 0.008 | 0.032 |  0.143 |   0.530 |   2.109 |   7.247 |
|---------------------+-------+-------+--------+---------+---------+---------|
| bubbleSort()        | 0.008 | 0.050 |  0.665 |   6.669 |  77.546 |         |
| insertionSort()     | 0.004 | 0.017 |  0.153 |   1.366 |  14.788 |         |
|---------------------+-------+-------+--------+---------+---------+---------|
| shellSortClassic()  | 0.004 | 0.017 |  0.081 |   0.328 |   1.440 |   5.274 |
| shellSortKnuth()    | 0.003 | 0.013 |  0.062 |   0.250 |   1.113 |   4.257 |
| shellSortTokuda()   | 0.004 | 0.014 |  0.065 |   0.263 |   1.115 |   4.034 |
|---------------------+-------+-------+--------+---------+---------+---------|
| combSort13()        | 0.005 | 0.019 |  0.096 |   0.380 |   1.704 |   6.177 |
| combSort125()       | 0.004 | 0.020 |  0.097 |   0.393 |   1.673 |   6.162 |
|---------------------+-------+-------+--------+---------+---------+---------|
| quickSortMiddle()   | 0.005 | 0.017 |  0.071 |   0.251 |   1.004 |   3.363 |
| quickSortMedian()   | 0.006 | 0.018 |  0.072 |   0.254 |   0.951 |   3.234 |
| quickSortMdnSwppd() | 0.004 | 0.014 |  0.059 |   0.210 |   0.830 |   2.821 |
+---------------------+-------+-------+--------+---------+---------+---------+

```

### Teensy 3.2

* 96 MHz ARM Cortex-M4
* Arduino IDE 1.8.13
* Teensyduino 1.53
* Compiler options: "Faster"

```
+---------------------+------------------------+---------+---------+---------+
|            \      N |    10 |    30 |    100 |     300 |    1000 |    3000 |
| Function    \       |       |       |        |         |         |         |
|---------------------+-------+-------+--------+---------+---------+---------|
| qsort()             | 0.017 | 0.072 |  0.318 |   1.155 |   4.573 |  15.723 |
|---------------------+-------+-------+--------+---------+---------+---------|
| bubbleSort()        | 0.011 | 0.117 |  1.261 |  12.389 | 141.563 |         |
| insertionSort()     | 0.006 | 0.039 |  0.405 |   3.375 |  36.832 |         |
|---------------------+-------+-------+--------+---------+---------+---------|
| shellSortClassic()  | 0.008 | 0.035 |  0.168 |   0.687 |   3.014 |  11.029 |
| shellSortKnuth()    | 0.006 | 0.027 |  0.130 |   0.528 |   2.345 |   8.901 |
| shellSortTokuda()   | 0.007 | 0.030 |  0.140 |   0.554 |   2.384 |   8.596 |
|---------------------+-------+-------+--------+---------+---------+---------|
| combSort13()        | 0.008 | 0.036 |  0.184 |   0.718 |   3.207 |  11.808 |
| combSort125()       | 0.008 | 0.040 |  0.194 |   0.788 |   3.364 |  12.347 |
|---------------------+-------+-------+--------+---------+---------+---------|
| quickSortMiddle()   | 0.007 | 0.026 |  0.109 |   0.392 |   1.552 |   5.281 |
| quickSortMedian()   | 0.009 | 0.031 |  0.122 |   0.420 |   1.574 |   5.309 |
| quickSortMdnSwppd() | 0.007 | 0.025 |  0.101 |   0.355 |   1.395 |   4.729 |
+---------------------+-------+-------+--------+---------+---------+---------+

```

